(()=>{"use strict";var e={d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{activate:()=>f});const t="mermaid",n="mermaidContainer",o=3,a=":",i=a.charCodeAt(0),s=a.length;function c(e){return e.replace(/&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\n+$/,"").trimStart()}function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const u=require("vscode"),d="markdown-mermaid";function f(e){return e.subscriptions.push(u.workspace.onDidChangeConfiguration((e=>{(e.affectsConfiguration(d)||e.affectsConfiguration("workbench.colorTheme"))&&u.commands.executeCommand("markdown.preview.refresh")}))),{extendMarkdownIt:e=>(function(e,r){e.use((e=>{e.block.ruler.before("fence",n,(function(e,r,c,l){let u,d=!1,f=e.bMarks[r]+e.tShift[r],p=e.eMarks[r];if(i!==e.src.charCodeAt(f))return!1;for(u=f+1;u<=p&&a[(u-f)%s]===e.src[u];u++);const g=Math.floor((u-f)/s);if(g<o)return!1;u-=(u-f)%s;const m=e.src.slice(f,u),h=e.src.slice(u,p);if(h.trim().split(" ")[0].toLowerCase()!==t)return!1;if(l)return!0;let k=r;for(;k++,!(k>=c||(f=e.bMarks[k]+e.tShift[k],p=e.eMarks[k],f<p&&e.sCount[k]<e.blkIndent));)if(i===e.src.charCodeAt(f)&&!(e.sCount[k]-e.blkIndent>=4)){for(u=f+1;u<=p&&a[(u-f)%s]===e.src[u];u++);if(!(Math.floor((u-f)/s)<g||(u-=(u-f)%s,u=e.skipSpaces(u),u<p))){d=!0;break}}const b=e.parentType,y=e.lineMax;e.parentType="container",e.lineMax=k;const C=e.push(n,"div",1);return C.markup=m,C.block=!0,C.info=h,C.map=[r,k],C.content=e.getLines(r+1,k,e.blkIndent,!0),e.parentType=b,e.lineMax=y,e.line=k+(d?1:0),!0}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules[n]=(e,r)=>{const n=e[r].content;return`<div class="${t}">${c(n)}</div>`}}));const u=e.options.highlight;e.options.highlight=(e,n,o)=>{const a=new RegExp("\\b("+r.languageIds().map(l).join("|")+")\\b","i");return n&&a.test(n)?`<pre style="all:unset;"><div class="${t}">${c(e)}</div></pre>`:u?.(e,n,o)??e}}(e,{languageIds:()=>u.workspace.getConfiguration(d).get("languages",["mermaid"])}),e.use(h),e)}}const p="default",g=["base","forest","dark","default","neutral"];function m(e){return"string"==typeof e&&g.includes(e)?e:p}function h(e){const r=e.renderer.render;return e.renderer.render=function(){const t=m(u.workspace.getConfiguration(d).get("darkModeTheme")),n=m(u.workspace.getConfiguration(d).get("lightModeTheme"));return`<span id="${d}" aria-hidden="true"\n                    data-dark-mode-theme="${t}"\n                    data-light-mode-theme="${n}"></span>\n                ${r.apply(e.renderer,arguments)}`},e}module.exports=r})();
//# sourceMappingURL=index.js.map